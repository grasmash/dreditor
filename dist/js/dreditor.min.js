/*! * Dreditor v2.0.0 (https://dreditor.org) * Copyright (c) 2016 Mark Carver (https://www.drupal.org/u/markcarver) * Licensed under MIT (https://github.com/unicorn-fail/dreditor/blob/2.x/LICENSE-MIT) */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Dreditor=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){function c(a){for(var b=[],c=0;c<a.length;c++)b.indexOf(a[c])===-1&&b.push(a[c]);return b}function d(a){var b=new Set;return a.filter(function(a){return!b.has(a)&&(b.add(a),!0)})}function e(a){var b=[];return new Set(a).forEach(function(a){b.push(a)}),b}function f(){var a=!1;return new Set([!0]).forEach(function(b){a=b}),a===!0}"Set"in a?"function"==typeof Set.prototype.forEach&&f()?b.exports=e:b.exports=d:b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){/*! * Sync/Async forEach * https://github.com/cowboy/javascript-sync-async-foreach * * Copyright (c) 2012 "Cowboy" Ben Alman * Licensed under the MIT license. * http://benalman.com/about/license/ */
!function(a){a.forEach=function(a,b,c){var d=-1,e=a.length>>>0;!function f(g){var h,i=g===!1;do++d;while(!(d in a)&&d!==e);return i||d===e?void(c&&c(!i,a)):(g=b.call({async:function(){return h=!0,f}},a[d],d,a),void(h||f(g)))}()}}("object"==typeof c&&c||this)},{}],3:[function(a,b,c){var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===e.call(a)},g=function(a){if(!a||"[object Object]"!==e.call(a))return!1;var b=d.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&d.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!b&&!c)return!1;var f;for(f in a);return"undefined"==typeof f||d.call(a,f)};b.exports=function a(){var b,c,d,e,h,i,j=arguments[0],k=1,l=arguments.length,m=!1;for("boolean"==typeof j?(m=j,j=arguments[1]||{},k=2):("object"!=typeof j&&"function"!=typeof j||null==j)&&(j={});k<l;++k)if(b=arguments[k],null!=b)for(c in b)d=j[c],e=b[c],j!==e&&(m&&e&&(g(e)||(h=f(e)))?(h?(h=!1,i=d&&f(d)?d:[]):i=d&&g(d)?d:{},j[c]=a(m,i,e)):"undefined"!=typeof e&&(j[c]=e));return j}},{}],4:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],5:[function(a,b,c){var d="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",e="(?:(?:[0-9a-fA-F:]){1,4}(?:(?::(?:[0-9a-fA-F]){1,4}|:)){2,7})+",f=b.exports=function(a){return a=a||{},a.exact?new RegExp("(?:^"+d+"$)|(?:^"+e+"$)"):new RegExp("(?:"+d+")|(?:"+e+")","g")};f.v4=function(a){return a=a||{},a.exact?new RegExp("^"+d+"$"):new RegExp(d,"g")},f.v6=function(a){return a=a||{},a.exact?new RegExp("^"+e+"$"):new RegExp(e,"g")}},{}],6:[function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=d;var e=Object.prototype.toString},{}],7:[function(a,b,c){/*! * is-plain-object <https://github.com/jonschlinkert/is-plain-object> * * Copyright (c) 2014-2015, Jon Schlinkert. * Licensed under the MIT License. */
function d(a){return e(a)===!0&&"[object Object]"===Object.prototype.toString.call(a)}var e=a("isobject");b.exports=function(a){var b,c;return d(a)!==!1&&(b=a.constructor,"function"==typeof b&&(c=b.prototype,d(c)!==!1&&c.hasOwnProperty("isPrototypeOf")!==!1))}},{isobject:8}],8:[function(a,b,c){/*! * isobject <https://github.com/jonschlinkert/isobject> * * Copyright (c) 2014-2015, Jon Schlinkert. * Licensed under the MIT License. */
b.exports=function(a){return null!=a&&"object"==typeof a&&!Array.isArray(a)}},{}],9:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],10:[function(a,b,c){/*! * isobject <https://github.com/jonschlinkert/isobject> * * Copyright (c) 2014-2015, Jon Schlinkert. * Licensed under the MIT License. */
var d=a("isarray");b.exports=function(a){return null!=a&&"object"==typeof a&&d(a)===!1}},{isarray:9}],11:[function(a,b,c){var d=a("ip-regex");b.exports=function(a){a=a||{};var b="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",e=d.v4().source,f="(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)",g="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",h="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",i="(?::\\d{2,5})?",j='(?:[/?#][^\\s"]*)?',k=["(?:"+b+"|www\\.)"+c,"(?:localhost|"+e+"|"+f+g+h+")",i,j].join("");return a.exact?new RegExp("(?:^"+k+"$)","i"):new RegExp(k,"ig")}},{"ip-regex":5}],12:[function(a,b,c){(function(b){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./DreditorLocaleBase"),k=d(j),l=a("./DreditorParser"),m=d(l),n=a("./DreditorUtility"),o=d(n),p=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,o.default.extend(!0,{},b.__defaultOptions__,a))),d=c.getOption("promise");if("function"==typeof d&&"object"===("undefined"==typeof d?"undefined":h(d))||"function"!=typeof(d.then||"function"==typeof d&&new d(o.default.noop)).then)throw new Error("Dreditor requires a valid Promise API. There are several polyfills or comprehensive libraries available to choose from.");var g=c.getOption("highlighter");return g&&c.on("render.hunk.start",function(a,b){b.highlightCode()}),null===c.getOption("sanitize.encodeHtmlEntities")&&c.setOption("sanitize.encodeHtmlEntities",!g),c}return g(b,a),i(b,[{key:"parse",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.promise(function(c,d){try{var e=new m.default(this,a,b);c(e.parse())}catch(a){d(a)}})}}]),b}(k.default);c.default=p,p.__version__="2.0.0",p.__defaultOptions__={garbageCollect:!0,highlighter:null,highlightCode:function(a){var b=this.getOption("highlighter");if(b&&o.default.isFunction(b.highlight)&&o.default.isFunction(b.Token)&&o.default.isPlainObject(b.languages)&&o.default.isPlainObject(b.languages.markup)){var c=this.getOption("prismLanguage",o.default.noop),d=c.call(this,b)||"markup";a=b.highlight(a,b.languages[d],d)}else if(o.default.isFunction(b)){var e=b.apply(b,a);return e||a}return a},prismLanguage:function(a){if(o.default.isPlainObject(a.languages[this.file.extension]))return this.file.extension;var b=this.getOption("prismExtensionLanguageMap",{});o.default.forEach([].concat(b[this.file.extension]||[]),function(b){if(o.default.isPlainObject(a.languages[b]))return b})},prismExtensionLanguageMap:{coffee:["coffeescript","javascript"],htaccess:"apacheconf",inc:"php",info:"ini",md:"markdown",yml:"yaml"},promise:b.Promise,renderToString:!1,sanitize:{comments:!0,encodeHtmlEntities:null,svnNewFiles:!0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./DreditorLocaleBase":22,"./DreditorParser":23,"./DreditorUtility":28}],13:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./DreditorUtility"),h=d(g),i=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,a),/*! Attributes (http://cgit.drupalcode.org/bootstrap/tree/js/attributes.js) * Copyright (c) 2016 Mark Carver <https://www.drupal.org/u/markcarver> * Licensed under GPL-2.0 (https://www.drupal.org/about/licensing) */
this.data={},this.data.class=[],this.merge(b)}return f(a,[{key:"toString",value:function(){var a,b,c="";for(a in this.data)if(this.data.hasOwnProperty(a)){if(b=this.data[a],h.default.isFunction(b)&&(b=b.call(this)),h.default.isObject(b)){var d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(b[e]);b=d}h.default.isArray(b)&&(b=b.join(" ")),("class"!==a||b)&&(c+=" "+h.default.encodeHtmlEntities(a)+'="'+h.default.encodeHtmlEntities(b)+'"')}return c}},{key:"addClass",value:function(a){for(var b=Array.prototype.slice.call(arguments),c=[],d=0,e=b.length;d<e;d++)c=c.concat(this.sanitizeClass(b[d]));return this.data.class=h.default.arrayUniq(this.data.class.concat(c)),this}},{key:"exists",value:function(a){return void 0!==this.data[a]&&null!==this.data[a]}},{key:"get",value:function(a,b){return this.exists(a)||(this.data[a]=void 0!==b?b:null),this.data[a]}},{key:"getData",value:function(){return h.default.extend({},this.data)}},{key:"getClasses",value:function(){return this.get("class",[])}},{key:"hasClass",value:function(a){a=this.sanitizeClass(a);for(var b=this.getClasses(),c=0,d=a.length;c<d;c++)if(h.default.indexOf(b,a[c])===-1)return!1;return!0}},{key:"merge",value:function(b,c){return b=b instanceof a?b.getData():b,b&&void 0!==b.class&&(b.class=this.sanitizeClass(b.class)),void 0===c||c?this.data=h.default.extend(!0,{},this.data,b):this.data=h.default.extend({},this.data,b),this.data.class=h.default.arrayUniq(this.data.class),this}},{key:"remove",value:function(a){return this.exists(a)&&delete this.data[a],this}},{key:"removeClass",value:function(a){for(var b=Array.prototype.slice.apply(arguments),c=this.getClasses(),d=[],e=0,f=b.length;e<f;e++){d=d.concat(this.sanitizeClass(b[e]));for(var g=0,i=d.length;g<i;g++){var j=h.default.indexOf(c,d[g]);j!==-1&&c.slice(j,1)}}return this}},{key:"replaceClass",value:function(a,b){var c=this.getClasses(),d=h.default.indexOf(c,a);return d!==-1&&(c[d]=b),this}},{key:"sanitizeClass",value:function(a){var b=[];a=[].concat(a).filter(Boolean);for(var c=0,d=a.length;c<d;c++)for(var e=a[c].split(" ").filter(Boolean),f=0,g=e.length;f<g;f++)b.push(e[f]);return b}},{key:"set",value:function(a,b){return this.data[a]="class"===a?this.sanitizeClass(b):b,this}}]),a}();c.default=i},{"./DreditorUtility":28}],14:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./DreditorEmitter"),j=d(i),k=a("./DreditorUtility"),l=d(k),m=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.options=l.default.extend(!0,{},a),c}return g(b,a),h(b,[{key:"getOption",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1],c=l.default.getProperty(a,this.options);return null===c?b:c}},{key:"promise",value:function a(b){var a=this.getOption("promise");return new a(b.bind(this))}},{key:"sanitize",value:function(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return a=a.replace(/\r\n|\r/g,"\n"),(b||this.getOption("sanitize.comments"))&&(a=a.replace(/^#[^\n]*\n/gm,"")),(b||this.getOption("sanitize.encodeHtmlEntities"))&&(a=l.default.encodeHtmlEntities(a)),(b||this.getOption("sanitize.svnNewFiles"))&&(a=a.replace(/^\?[^\n]*\n/gm,"")),a}},{key:"setOption",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1],c=a&&a.split(".")||[];if(1===c.length)return this.options[c[0]]=b,this;try{var d=c.reduce(function(a,b){return l.default.isPlainObject(a[b])?a[b]:a},this.options);d[c[c.length-1]]=b}catch(a){}return this}}]),b}(j.default);c.default=m},{"./DreditorEmitter":17,"./DreditorUtility":28}],15:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorRenderable"),k=d(j),l=a("./DreditorUtility"),m=d(l),n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));if("string"!=typeof c)throw new Error("The argument passed must be a string. This was passed instead: "+c);return d.additions=0,d.deletions=0,d.raw=c,d.rawSize=c.length,d.size=0,d}return g(b,a),h(b,[{key:"doParse",value:function(a,b){var c=this;return this.doTask(a?"parse."+a:"parse",function(){return c.resolve(b.call(c))}).then(function(){var a=c.resolve(c);return c.garbageCollect("parse"),a})}},{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.raw=null),c}},{key:"parse",value:function(){return this.reject(new Error('You must subclass the "parse" method of DreditorDiff before invoking it.'))}},{key:"renderDiffStats",value:function(){var a=arguments.length<=0||void 0===arguments[0]?this:arguments[0];if(!(a instanceof b))throw new Error('The "object" argument passed is not an instance of DreditorDiff: '+a);return m.default.createElement("<span>").addClass("dreditor-stat").append('<span class="dreditor-stat-additions" title="'+a.additions+' additions">+'+a.additions+"</span>").append('<span class="dreditor-stat-deletions" title="'+a.deletions+' deletions">-'+a.deletions+"</span>")}}]),b}(k.default);c.default=n},{"./DreditorRenderable":26,"./DreditorUtility":28}],16:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./DreditorAttributes"),h=d(g),i=a("./DreditorUtility"),j=d(i),k=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?null:arguments[0],c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],d=arguments.length<=2||void 0===arguments[2]?null:arguments[2];e(this,a),this.attributes=c instanceof h.default?c:new h.default(c),this.children=[],this.enabled=!0,this.tag=b,this.value=d,this.voidElement=b&&j.default.indexOf(a.voidElements,b)!==-1}return f(a,[{key:"addClass",value:function(a){return this.attributes.addClass.apply(this.attributes,arguments),this}},{key:"append",value:function(b,c){return this.children.push(a.create(b,c)),this}},{key:"appendTo",value:function(b){if(!(b instanceof a))throw new Error("You can only append to another DreditorElement instance.");return b.append(this),this}},{key:"clone",value:function b(){var b=new a(this.tag,this.attributes.getData());this.value&&(b.value=this.value);for(var c=0,d=this.children.length;c<d;c++)b.children.push(this.children[c].clone());return b}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"enable",value:function(){return this.enabled=!0,this}},{key:"getAttribute",value:function(a,b){return this.attributes.get.apply(this.attributes,arguments)}},{key:"getClasses",value:function(){return this.attributes.getClasses.apply(this.attributes,arguments)}},{key:"hasAttribute",value:function(a){return this.attributes.exists.apply(this.attributes,arguments)}},{key:"hasClass",value:function(a){return this.attributes.hasClass.apply(this.attributes,arguments)}},{key:"html",value:function(a){if(void 0!==a)return this.children=[],a&&this.append(a),this;for(var b="",c=0,d=this.children;c<d;c++)b+=this.children[c].toString();return b}},{key:"prepend",value:function(b,c){return this.children.unshift(a.create(b,c)),this}},{key:"prependTo",value:function(b){if(!(b instanceof a))throw new Error("You can only prepend to another DreditorElement instance.");return b.prepend(this),this}},{key:"removeAttribute",value:function(a){return this.attributes.remove.apply(this.attributes,arguments),this}},{key:"removeClass",value:function(a){return this.attributes.removeClass.apply(this.attributes,arguments),this}},{key:"replaceClass",value:function(a,b){return this.attributes.replaceClass.apply(this.attributes,arguments),this}},{key:"setAttribute",value:function(a,b){return this.attributes.set.apply(this.attributes,arguments),this}},{key:"setAttributes",value:function(a){return this.attributes.merge.apply(this.attributes,arguments),this}},{key:"text",value:function(a){return void 0!==a?(this.children=[],this.value=j.default.encodeHtmlEntities(a),this):this.value||""}},{key:"toString",value:function(){var b="";if(!this.enabled)return b;if(this.tag&&(b+="<"+this.tag+this.attributes+(this.voidElement?" /":"")+">"),this.value||1!==this.children.length||this.children[0]instanceof a||(this.value=this.children[0],this.children=[]),this.value&&(b+=this.value),this.children.length)for(var c=0,d=this.children.length;c<d;c++)b+=this.children[c].toString();return this.tag&&!this.voidElement&&(b+="</"+this.tag+">\n"),b}}]),a}();c.default=k,k.voidElements=["area","base","br","col","embed","hr","img","input","link","menuitem","meta","param","source","track","wbr"],k.create=function(){var a=arguments.length<=0||void 0===arguments[0]?null:arguments[0],b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(a instanceof k)return a.setAttributes(b);var c=a&&a.match(/^<?(\w+)[^>]*>?$/);if(c)return new k(c[1]);var d=new k;return d.value=a,d}},{"./DreditorAttributes":13,"./DreditorUtility":28}],17:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./DreditorEvent"),h=d(g),i=a("./DreditorUtility"),j=d(i),k=function(){function a(){e(this,a),this.listeners={}}return f(a,[{key:"emit",value:function(a){for(var b=this,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];if(!a||"string"!=typeof a)throw new Error("Invalid event type: "+a);var f=[];for(var g in this.listeners)a.match(new RegExp(g))&&(f=f.concat(this.listeners[g]));if(!f.length)return!0;var i=new h.default(a);return i.setTarget(this),d.unshift(i),j.default.forEach(f,function(a){a.apply(b,d)}),!i.defaultPrevented}},{key:"off",value:function(a,b){if(!this.listeners[a])return this;if(!b)return this.listeners[a]=[],this;for(var c=0,d=this.listeners[a].length;c<d;c++)if(this.listeners[a][c]===b){this.listeners[a].splice(c,1);break}return this}},{key:"on",value:function(a,b){return this.listeners[a]||(this.listeners[a]=[]),this.listeners[a].push(b),this}},{key:"once",value:function a(b,c){var a=function a(){this.off(b,a),c.apply(this,arguments)};return this.on(b,a)}}]),a}();c.default=k},{"./DreditorEvent":18,"./DreditorUtility":28}],18:[function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a);var c=!1,e=null,f=b.split(".").filter(Boolean),g=f.shift();Object.defineProperty(this,"defaultPrevented",{get:function(){return c}}),Object.defineProperty(this,"namespace",{value:[""].concat(f).join(".")}),Object.defineProperty(this,"timeStamp",{value:Date.now()}),Object.defineProperty(this,"type",{value:g}),Object.defineProperty(this,"preventDefault",{value:function(){c=!0}}),Object.defineProperty(this,"setTarget",{value:function(a){null===e&&(e=a)}}),Object.defineProperty(this,"target",{get:function(){return e}})};c.default=e},{}],19:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorDiff"),k=d(j),l=a("./DreditorHunk"),m=d(l),n=a("./DreditorPatch"),o=d(n),p=a("./DreditorUtility"),q=d(p),r=function(a){function b(a,c){if(e(this,b),!(a instanceof o.default))throw new Error('The "patch" argument must be an instance of DreditorPatch: '+a);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a.dreditor,c));return Object.defineProperty(d,"patch",{value:a,configurable:!0,enumerable:!1,writable:!0}),d.extension=null,d.filename=null,d.hunks=[],d.index=null,d.source=null,d.status=null,d.target=null,d}return g(b,a),h(b,[{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.patch=null),c}},{key:"parse",value:function(){var a=this;return this.doParse("file",function(){var b=a.raw.split(/^@@+\s/gm).filter(Boolean);return q.default.forEach(b.shift().split(/\n/),function(b){/\/dev\/null/.test(b)||(/^index\s/.test(b)?a.index=b.replace(/^index\s/,""):/^---\s/.test(b)?a.source=b.replace(/^---\s(a\/)?/,""):/^\+\+\+\s/.test(b)&&(a.target=b.replace(/^\+\+\+\s(b\/)?/,"")))}),!a.source&&a.target?(a.filename=a.target,a.status="added"):a.source&&!a.target?(a.filename=a.source,a.status="deleted"):a.source&&a.target&&a.source!==a.target?(a.filename=a.source+" -> "+a.target,a.status="renamed"):a.source===a.target&&(a.filename=a.target,a.status="modified"),a.extension=q.default.extension(a.target?a.target:a.source),a.map(b,function(b,c){var d=new m.default(a,b);return d.parse().then(function(){d.id="hunk-"+(c+1),d.index=c,a.size+=d.size,a.hunks[c]=d})})})}},{key:"render",value:function(){var a=this;return this.doRender("file",function(){a.rendered=q.default.createElement("<div>",a.attributes).addClass("dreditor-file");var b=q.default.createElement("<div>").addClass("dreditor-file-header").appendTo(a.rendered);q.default.createElement("<div>").addClass("dreditor-file-info").appendTo(b).append(a.renderDiffStats()).append(a.renderStatus()).append(a.renderFilename());var c=q.default.createElement("<div>").addClass("dreditor-file-table-wrapper").appendTo(a.rendered),d=q.default.createElement("<table>").addClass("dreditor-file-table").appendTo(c),e=q.default.createElement("<tbody>").appendTo(d);return a.map([].concat(a.hunks),function(a){return a.render().then(function(a){return e.append(a)})})})}},{key:"renderFilename",value:function(){return q.default.createElement("<span>").addClass("dreditor-filename").text(this.filename)}},{key:"renderStatus",value:function(){var a="?";return"added"===this.status?a="A":"deleted"===this.status?a="D":"modified"===this.status?a="M":"renamed"===this.status&&(a="R"),q.default.createElement("<span>").text(a).addClass(["dreditor-file-status","dreditor-file-status--"+(this.status?this.status:"unknown")]).setAttribute("title",this.status[0].toUpperCase()+this.status.substr(1))}}]),b}(k.default);c.default=r},{"./DreditorDiff":15,"./DreditorHunk":20,"./DreditorPatch":24,"./DreditorUtility":28}],20:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorDiff"),k=d(j),l=a("./DreditorFile"),m=d(l),n=a("./DreditorLine"),o=d(n),p=a("./DreditorUtility"),q=d(p),r=function(a){function b(a,c){if(e(this,b),!(a instanceof m.default))throw new Error('The "file" argument must be an instance of DreditorFile: '+a);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a.dreditor,c));return Object.defineProperty(d,"file",{value:a,configurable:!0,enumerable:!1,writable:!0}),d.header=null,d.index=null,d.lines=[],d.meta=null,d.source={start:0,total:0},d.target={start:0,total:0},d}return g(b,a),h(b,[{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.file=null),c}},{key:"highlightCode",value:function(){var a=this,b="";q.default.forEach(this.lines,function(c,d){b+=c.value+(d!==a.lines.length-1?"\n":"")});var c=this.getDreditorOption("highlightCode",q.default.noop),d=(c.apply(this,[b])||"").split("\n").filter(Boolean);q.default.forEach(d,function(b,c){a.lines[c].value=b})}},{key:"parse",value:function(){var a=this;return this.doParse("hunk",function(){var b=a.raw.match(/^[^\n]+/);if(b[0]){var c=b[0].match(/\s?(@@+)\s?/);a.meta=(c&&c[1]&&c[1]+" "||"")+b[0];var d=b[0].split(/\s?@@+\s?/);d[1]&&(a.header=d[1]);var e,f,g=d[0].split(" ");"-"===g[0][0]?(e=g[0].substr(1).split(","),f=g[1].substr(1).split(",")):(e=g[1].substr(1).split(","),f=g[0].substr(1).split(",")),a.source.start=parseInt(e[0],10),a.source.total=parseInt(e[1]||0,10),a.target.start=parseInt(f[0],10),a.target.total=parseInt(f[1]||0,10)}var h=a.source.start,i=a.target.start,j=a.raw.replace(/^[^\n]*\n/,"").split(/\n/).filter(Boolean);return a.map(j,function(b,c){var d=new o.default(a,b);return d.parse().then(function(){switch(d.id="line-"+(c+1),d.index=c,a.size+=d.size,d.status){case"added":d.lineNumbers.target=i++;break;case"deleted":d.lineNumbers.source=h++;break;default:d.lineNumbers.source=h++,d.lineNumbers.target=i++}a.lines[c]=d})})})}},{key:"render",value:function(){var a=this;return this.doRender("hunk",function(){return a.rendered=q.default.createElement(),a.meta&&q.default.createElement("<tr>",a.attributes).addClass(["dreditor-line","dreditor-line--hunk"]).append('<td data-line-number="..." class="dreditor-line-number"></td>').append('<td data-line-number="..." class="dreditor-line-number"></td>').append("<td>"+a.meta+"</td>").appendTo(a.rendered),a.map([].concat(a.lines),function(b){return b.render().then(function(b){return a.rendered.append(b)})})})}}]),b}(k.default);c.default=r},{"./DreditorDiff":15,"./DreditorFile":19,"./DreditorLine":21,"./DreditorUtility":28}],21:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorDiff"),k=d(j),l=a("./DreditorHunk"),m=d(l),n=a("./DreditorUtility"),o=d(n),p=function(a){function b(a,c){if(e(this,b),!(a instanceof m.default))throw new Error('The "hunk" argument must be an instance of DreditorHunk: '+a);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a.dreditor,c));return Object.defineProperty(d,"hunk",{value:a,configurable:!0,enumerable:!1,writable:!0}),d.index=null,d.lineNumbers={source:0,target:0},d.status=null,d.value=null,d}return g(b,a),h(b,[{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.hunk=null),c}},{key:"parse",value:function(){var a=this;return this.doParse("line",function(){switch(a.status="+"===a.raw[0]&&"added"||"-"===a.raw[0]&&"deleted"||"context",a.attributes.addClass("dreditor-line--"+a.status),a.value=a.raw.substr(1),a.size=a.value.length,a.status){case"added":a.hunk.additions++,a.hunk.file.additions++,a.hunk.file.patch.additions++,a.hunk.file.patch.parser.additions++;break;case"deleted":a.hunk.deletions++,a.hunk.file.deletions++,a.hunk.file.patch.deletions++,a.hunk.file.patch.parser.deletions++}return a.resolve(a.value)})}},{key:"render",value:function(){var a=this;return this.doRender("line",function(){a.rendered=o.default.createElement("<tr>",a.attributes).addClass(["dreditor-line","dreditor-line--"+a.status]).setAttribute("id",a.id),o.default.createElement("<td>").appendTo(a.rendered).addClass("dreditor-line-number").setAttribute("id",a.id+"S"+a.lineNumbers.source).setAttribute("data-line-number",a.lineNumbers.source?a.lineNumbers.source:""),o.default.createElement("<td>").appendTo(a.rendered).addClass("dreditor-line-number").setAttribute("id",a.id+"T"+a.lineNumbers.target).setAttribute("data-line-number",a.lineNumbers.target?a.lineNumbers.target:"");var b=o.default.createElement("<td>").appendTo(a.rendered).addClass("dreditor-line-code");return o.default.createElement("<span>").appendTo(b).addClass("dreditor-line-code-inner").html(""+("added"===a.status&&"+"||"deleted"===a.status&&"-"||" ")+a.value),a.resolve(a.rendered)})}}]),b}(k.default);c.default=p},{"./DreditorDiff":15,"./DreditorHunk":20,"./DreditorUtility":28}],22:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./DreditorBase"),j=d(i),k=a("./DreditorUtility"),l=d(k),m=function(a){function b(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,l.default.extend(!0,{},b.__defaultOptions__,a)));return c.langCode=c.getOption("langCode","en-US"),c.locale=c.getOption("locale",{}),c}return g(b,a),h(b,[{key:"t",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.langCode:arguments[1];return this.locale[b]&&this.locale[b].hasOwnProperty(a)?this.locale[b][a]:a}}]),b}(j.default);c.default=m,m.__defaultOptions__={locale:{}}},{"./DreditorBase":14,"./DreditorUtility":28}],23:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./Dreditor"),k=(d(j),a("./DreditorDiff")),l=d(k),m=a("./DreditorPatch"),n=d(m),o=a("./DreditorUrl"),p=d(o),q=a("./DreditorUtility"),r=d(q),s=function(a){function b(a,c){var d=arguments.length<=2||void 0===arguments[2]?null:arguments[2];e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return g.sanitized=null,g.patches=[],g.url=d&&p.default.create(d)||null,g}return g(b,a),h(b,[{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"parse"===a&&(this.sanitized=null),c}},{key:"parse",value:function(){var a=this;return this.doParse(null,function(){a.sanitized=a.sanitize(a.raw);var b=[],c=a.sanitized.split(/^From (\b[0-9a-f]{5,40}\b) Mon Sep 17 00:00:00 2001/gm).filter(function(a){return/^[0-9a-f]{5,40}/.test(a)?(b.push(a),!1):!!a.length});return a.map(c,function(c,d){var e=new n.default(a,c);return e.parse().then(function(){e.sha1=b[d]||null,e.id="patch-"+(e.sha1?e.sha1.substr(0,5):d+1),e.index=d,a.size+=e.size,a.patches[d]=e})})})}},{key:"render",value:function(){var a=this;return this.doRender(null,function(){a.rendered=r.default.createElement("<div>",a.attributes).addClass(["dreditor-wrapper","dreditor-reset"]);var b=r.default.createElement("<ul>").addClass("dreditor-patch-menu").appendTo(a.rendered).append("<li><strong>Patch</strong></li>"),c=r.default.createElement("<div>").addClass("dreditor-patches").appendTo(a.rendered);return a.patches.length<=1&&b.disable(),a.map([].concat(a.patches),function(a,d){return b.append('<li><a href="#'+a.id+'">'+(d+1)+"</a></li>"),a.render().then(function(a){return c.append(a)})})})}}]),b}(l.default);c.default=s},{"./Dreditor":12,"./DreditorDiff":15,"./DreditorPatch":24,"./DreditorUrl":27,"./DreditorUtility":28}],24:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorDiff"),k=d(j),l=a("./DreditorFile"),m=d(l),n=a("./DreditorUtility"),o=d(n),p=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a.dreditor,c));return Object.defineProperty(d,"parser",{value:a,configurable:!0,enumerable:!1,writable:!0}),d.files=[],d.index=null,d.meta=null,d.sha1=null,d}return g(b,a),h(b,[{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.parser=null),c}},{key:"parse",value:function(){var a=this;return this.doParse("patch",function(){var b=a.raw.split(/^diff\s[^\n]+\n/gm),c=b.shift();return b=b.filter(Boolean),a.parseMetaInfo(c,b).then(function(){return a.parseFiles(b)})})}},{key:"parseMetaInfo",
value:function(a,b){var c=this;return this.meta?this.meta:this.doParse("patch.meta",function(){var d={};if(a.length){var e=a.split("\n").filter(Boolean),f=o.default.indexOf(e,""),g=o.default.indexOf(e,"-- >8 --");f!==-1&&g!==-1&&(f===-1&&(f=e.length),e=e.slice(0,f).concat(e.slice((g!==-1?g:f)+1)));var h;if(o.default.forEach(e,function(a,b){var c=a.match(/^([\w\d\-_]+):\s(.*)/),e=c&&c[1]&&o.default.machineName(c[1]),f=c&&c[2];e&&f?(/^date/i.test(e)?f=isNaN(Date.parse(f))?f:new Date(f):/^subject/i.test(e)&&(f=f.replace(/^\[PATCH]\s/,"")),d[e]=f,h=e):h&&a.match(/^\s/)?d[h]+=a:a&&!a.match(/^---/)||(h=null)}),b&&b.length){var i=b[b.length-1],j=i.search(/^--\s*\n(.|\n)*$/m);j!==-1&&(d.signature=i.substr(j).replace(/^--\s*\n/,"")||null,d.signature&&(b[b.length-1]=i.substr(0,j)))}}c.meta=d})}},{key:"parseFiles",value:function(a){var b=this;return this.map(a,function(a,c){var d=new m.default(b,a);return d.parse().then(function(){d.id="file-"+(c+1),d.index=c,b.size+=d.size,b.files[c]=d})})}},{key:"render",value:function(){var a=this;return this.doRender("patch",function(){if(a.rendered=o.default.createElement("<div>").addClass("dreditor-patch"),Object.keys(a.meta).length){var b=o.default.createElement("<div>").addClass("dreditor-patch-meta").appendTo(a.rendered),c=o.default.createElement("<table>").appendTo(b),d=o.default.createElement("<tbody>").appendTo(c);for(var e in a.meta)if(a.meta.hasOwnProperty(e)){var f=a.meta[e];if(f instanceof Date){var g="function"==typeof f.toISOString&&f.toISOString();f="function"==typeof f.toLocaleString?f.toLocaleString():f.toString(),g&&(f='<time datetime="'+g+'">'+f+"</time>")}o.default.createElement("<tr><td>"+e+"</td><td>"+f+"</td></tr>").appendTo(d)}}return a.map([].concat(a.files),function(b){return b.render().then(function(b){return a.rendered.append(b)})})})}}]),b}(k.default);c.default=p},{"./DreditorDiff":15,"./DreditorFile":19,"./DreditorUtility":28}],25:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./Dreditor"),h=d(g),i=a("./DreditorUtility"),j=d(i),k=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(e(this,a),!(b instanceof h.default))throw new Error('The "dreditor" argument must be an instance of Dreditor: '+b);Object.defineProperty(this,"dreditor",{value:b,configurable:!0,enumerable:!1,writable:!0}),this.options=c}return f(a,[{key:"all",value:function(a){var b=this.getDreditorOption("promise");return b.all(a)}}]),f(a,[{key:"doTask",value:function(a,b){var c=this,d=this;return d.promise(function(e,f){return d.emit(a+".start",c)?e(b.call(d)):f(d)}).then(function(){return d.emit(a+".end",c)&&d})}},{key:"each",value:function(a,b){var c=this;return a=j.default.isArray(a)?a:[a],a.reduce(function(c,d,e){return c.then(function(){return b(d,e,a)})},this.resolve()).then(function(){return c.resolve(a)})}},{key:"emit",value:function(a,b){return this.proxy("emit",arguments)}},{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],b=!!this.getDreditorOption("garbageCollect");return b&&"render"===a&&(this.dreditor=null),b}},{key:"getDreditorOption",value:function(a){arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.proxy("getOption",arguments)}},{key:"getOption",value:function(a){arguments.length<=1||void 0===arguments[1]?null:arguments[1];return this.dreditor.getOption.apply(this,arguments)}},{key:"map",value:function(a,b){var c=this;return this.each(a,function(d,e){a[e]=c.resolve(b.apply(c,[d,e,a]))}).then(function(a){return c.all(a)})}},{key:"off",value:function(a,b){return this.proxy("off",arguments),this}},{key:"on",value:function(a,b){return this.proxy("on",arguments),this}},{key:"once",value:function(a,b){return this.proxy("once",arguments),this}},{key:"promise",value:function a(b){var a=this.getDreditorOption("promise");return new a(b.bind(this))}},{key:"proxy",value:function(a,b){return this.dreditor[a].apply(this.dreditor,b)}},{key:"reject",value:function(a){var b=this.getDreditorOption("promise");return b.reject(a)}},{key:"resolve",value:function(a){var b=this.getDreditorOption("promise");return b.resolve(a)}},{key:"sanitize",value:function(a){!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this.proxy("sanitize",arguments)}},{key:"t",value:function(a){arguments.length<=1||void 0===arguments[1]?this.langCode:arguments[1];return this.proxy("t",arguments)}}]),a}();c.default=k},{"./Dreditor":12,"./DreditorUtility":28}],26:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function a(b,c,d){null===b&&(b=Function.prototype);var e=Object.getOwnPropertyDescriptor(b,c);if(void 0===e){var f=Object.getPrototypeOf(b);return null===f?void 0:a(f,c,d)}if("value"in e)return e.value;var g=e.get;if(void 0!==g)return g.call(d)},j=a("./DreditorAttributes"),k=d(j),l=a("./DreditorProxy"),m=d(l),n=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return d.attributes=new k.default,d.id=null,d.rendered=null,d}return g(b,a),h(b,[{key:"doRender",value:function(a,b){var c=this;return this.rendered?this.resolve(this.rendered):this.doTask(a?"render."+a:"render",function(){return c.resolve(b.call(c)).then(function(){return c.getDreditorOption("renderToString")&&(c.rendered=c.rendered.toString()),c.resolve(c.rendered)})}).catch(function(a){if(a instanceof Error)throw a;return c.resolve(c.rendered.disable())}).then(function(){var a=c.resolve(c.rendered);return c.garbageCollect("render"),a})}},{key:"garbageCollect",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"default":arguments[0],c=i(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"garbageCollect",this).call(this,a);return c&&"render"===a&&(this.attributes=null),c}},{key:"render",value:function(){return this.reject(new Error('You must subclass the "render" method of DreditorRenderable before invoking it.'))}}]),b}(m.default);c.default=n},{"./DreditorAttributes":13,"./DreditorProxy":25}],27:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./DreditorUtility"),g=d(f),h=function a(b){if(e(this,a),this.basename=null,this.extension=null,this.filename=null,this.sha1=null,this.size=0,this.type=null,this.url="string"==typeof b&&b||null,g.default.isObject(b)&&g.default.extend(this,b),!this.url||!g.default.isUrl(this.url))throw new Error('A DreditorUrl object must be initialized with a valid "url" property.');this.extension=g.default.extension(this.url),this.basename=g.default.basename(this.url,"."+this.extension),this.filename=[this.basename,this.extension].join("."),this.sha1=g.default.sha1(this.url)};c.default=h,h.create=function(a){return a instanceof h?a:new h(a)}},{"./DreditorUtility":28}],28:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("array-uniq"),f=d(e),g=a("./DreditorElement"),h=d(g),i=a("extend"),j=d(i),k=a("indexof"),l=d(k),m=a("isarray"),n=d(m),o=a("is-function"),p=d(o),q=a("isobject"),r=d(q),s=a("is-plain-object"),t=d(s),u=a("url-regex"),v=d(u),w=a("async-foreach").forEach,x={arrayUniq:function(a){return(0,f.default)(a)},basename:function(a,b){/*! PHP's basename in JavaScript (https://github.com/kvz/locutus/blob/master/src/php/filesystem/basename.js) * Copyright (c) 2007-2016 Kevin van Zonneveld (http://kvz.io) and Contributors (http://locutus.io/authors) * Licensed under MIT (https://github.com/kvz/locutus/blob/master/LICENSE) */
var c=a,d=c.charAt(c.length-1);return"/"!==d&&"\\"!==d||(c=c.slice(0,-1)),c=c.replace(/^.*[\/\\]/g,""),"string"==typeof b&&c.substr(c.length-b.length)===b&&(c=c.substr(0,c.length-b.length)),c},createElement:function(a,b){return h.default.create(a,b)},forEach:function(a,b){w(a,b)},encodeHtmlEntities:function(a){return(""+a).replace(/[\u00A0-\u9999<>&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})},extend:function(a,b){return j.default.apply({},arguments)},extension:function(a){return/tar\.gz$/.test(a)?"tar.gz":a.slice((a.lastIndexOf(".")-1>>>0)+2)},getProperty:function(a,b){return a.split(".").reduce(function(a,b){return void 0!==a[b]?a[b]:null},b)},indexOf:function(a,b){return(0,l.default)(a,b)},isArray:function(a){return(0,n.default)(a)},isFunction:function(a){return(0,p.default)(a)},isObject:function(a){return(0,r.default)(a)},isPlainObject:function(a){return(0,t.default)(a)},isSha1:function(a){return/^[0-9a-f]{5,40}$/.test(a)},isUrl:function(a){var b=arguments.length<=1||void 0===arguments[1]?{exact:!0}:arguments[1];return a.search(/(\n|\r\n|\r)/gm)===-1&&(0,v.default)(b).test(a)},machineName:function(a){return a.replace(/([A-Z]+[^A-Z]+)/g,"_$1").toLowerCase().replace(/[^a-z0-9-]+/g,"_").replace(/_+/g,"_").replace(/(^_|_$)/g,"")},noop:function(){},sha1:function(a){/*! PHP's sha1 in JavaScript (https://github.com/kvz/locutus/blob/master/src/php/strings/sha1.js) * Copyright (c) 2007-2016 Kevin van Zonneveld (http://kvz.io) and Contributors (http://locutus.io/authors) Licensed under MIT (https://github.com/kvz/locutus/blob/master/LICENSE) */
var b,c,d,e,f,g,h,i,j,k=function(a,b){var c=a<<b|a>>>32-b;return c},l=function(a){var b,c,d="";for(b=7;b>=0;b--)c=a>>>4*b&15,d+=c.toString(16);return d},m=new Array(80),n=1732584193,o=4023233417,p=2562383102,q=271733878,r=3285377520;a=unescape(encodeURIComponent(a));var s=a.length,t=[];for(c=0;c<s-3;c+=4)d=a.charCodeAt(c)<<24|a.charCodeAt(c+1)<<16|a.charCodeAt(c+2)<<8|a.charCodeAt(c+3),t.push(d);switch(s%4){case 0:c=2147483648;break;case 1:c=a.charCodeAt(s-1)<<24|8388608;break;case 2:c=a.charCodeAt(s-2)<<24|a.charCodeAt(s-1)<<16|32768;break;case 3:c=a.charCodeAt(s-3)<<24|a.charCodeAt(s-2)<<16|a.charCodeAt(s-1)<<8|128}for(t.push(c);t.length%16!==14;)t.push(0);for(t.push(s>>>29),t.push(s<<3&4294967295),b=0;b<t.length;b+=16){for(c=0;c<16;c++)m[c]=t[b+c];for(c=16;c<=79;c++)m[c]=k(m[c-3]^m[c-8]^m[c-14]^m[c-16],1);for(e=n,f=o,g=p,h=q,i=r,c=0;c<=19;c++)j=k(e,5)+(f&g|~f&h)+i+m[c]+1518500249&4294967295,i=h,h=g,g=k(f,30),f=e,e=j;for(c=20;c<=39;c++)j=k(e,5)+(f^g^h)+i+m[c]+1859775393&4294967295,i=h,h=g,g=k(f,30),f=e,e=j;for(c=40;c<=59;c++)j=k(e,5)+(f&g|f&h|g&h)+i+m[c]+2400959708&4294967295,i=h,h=g,g=k(f,30),f=e,e=j;for(c=60;c<=79;c++)j=k(e,5)+(f^g^h)+i+m[c]+3395469782&4294967295,i=h,h=g,g=k(f,30),f=e,e=j;n=n+e&4294967295,o=o+f&4294967295,p=p+g&4294967295,q=q+h&4294967295,r=r+i&4294967295}return j=l(n)+l(o)+l(p)+l(q)+l(r),j.toLowerCase()},template:function(a){var b=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],c=arguments.length<=2||void 0===arguments[2]||arguments[2];return a.replace(/[{][{] ([\w._-]+) [}][}]/gim,function(a,d){var e=x.getProperty(d,b);return null!==e?e:c?"":a})}};c.default=x},{"./DreditorElement":16,"array-uniq":1,"async-foreach":2,extend:3,indexof:4,"is-function":6,"is-plain-object":7,isarray:9,isobject:10,"url-regex":11}],29:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./Dreditor"),f=d(e),g=a("./DreditorAttributes"),h=d(g),i=a("./DreditorBase"),j=d(i),k=a("./DreditorDiff"),l=d(k),m=a("./DreditorElement"),n=d(m),o=a("./DreditorEmitter"),p=d(o),q=a("./DreditorEvent"),r=d(q),s=a("./DreditorFile"),t=d(s),u=a("./DreditorHunk"),v=d(u),w=a("./DreditorLine"),x=d(w),y=a("./DreditorLocaleBase"),z=d(y),A=a("./DreditorParser"),B=d(A),C=a("./DreditorPatch"),D=d(C),E=a("./DreditorProxy"),F=d(E),G=a("./DreditorRenderable"),H=d(G),I=a("./DreditorUrl"),J=d(I),K=a("./DreditorUtility"),L=d(K);b.exports=function(a){return new f.default(a)},b.exports.__version__=f.default.__version__,b.exports.__defaultOptions__=f.default.__defaultOptions__,b.exports.Dreditor=f.default,b.exports.DreditorAttributes=h.default,b.exports.DreditorBase=j.default,b.exports.DreditorDiff=l.default,b.exports.DreditorElement=n.default,b.exports.DreditorEmitter=p.default,b.exports.DreditorEvent=r.default,b.exports.DreditorFile=t.default,b.exports.DreditorHunk=v.default,b.exports.DreditorLine=x.default,b.exports.DreditorLocaleBase=z.default,b.exports.DreditorParser=B.default,b.exports.DreditorPatch=D.default,b.exports.DreditorProxy=F.default,b.exports.DreditorRenderable=H.default,b.exports.DreditorUrl=J.default,b.exports.DreditorUtility=L.default},{"./Dreditor":12,"./DreditorAttributes":13,"./DreditorBase":14,"./DreditorDiff":15,"./DreditorElement":16,"./DreditorEmitter":17,"./DreditorEvent":18,"./DreditorFile":19,"./DreditorHunk":20,"./DreditorLine":21,"./DreditorLocaleBase":22,"./DreditorParser":23,"./DreditorPatch":24,"./DreditorProxy":25,"./DreditorRenderable":26,"./DreditorUrl":27,"./DreditorUtility":28}]},{},[29])(29)});